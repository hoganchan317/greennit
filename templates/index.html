<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>MyMiniReddit - 帖子列表</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
<div class="max-w-4xl mx-auto py-8">

    <!-- 顶部导航 -->
    <div class="flex justify-between items-center mb-8">
        <a href="/" class="text-3xl font-bold text-orange-300">MyMiniReddit</a>

        <div class="space-x-4">
            {% if username %}
                <span class="text-sm opacity-80">已登录：{{ username }}</span>
                <a href="/post/new" class="px-3 py-1 bg-emerald-500 rounded text-sm font-semibold">发帖</a>
                <a href="/logout" class="px-3 py-1 bg-slate-700 rounded text-sm">退出</a>
            {% else %}
                <a href="/login" class="px-3 py-1 bg-sky-500 rounded text-sm font-semibold">登录</a>
                <a href="/register" class="px-3 py-1 bg-emerald-500 rounded text-sm font-semibold">注册</a>
            {% endif %}
        </div>
    </div>

    <!-- 帖子列表 -->
    <div class="space-y-4">
        {% if posts %}
            {% for p in posts %}
                <a href="/post/{{ p[0] }}" class="block bg-slate-800/80 rounded-xl p-4 hover:bg-slate-700 transition">
                    <div class="flex justify-between items-center mb-1">
                        <h2 class="text-xl font-semibold">{{ p[1] }}</h2>
                        <span class="text-xs opacity-70">
                            by {{ p[4] }} · {{ p[3].strftime('%Y-%m-%d %H:%M') if p[3] else '' }}
                        </span>
                    </div>
                    <p class="text-sm opacity-80 line-clamp-2">
                        {{ p[2][:120] }}{% if p[2]|length > 120 %}...{% endif %}
                    </p>
                </a>
            {% endfor %}
        {% else %}
            <div class="text-center text-slate-400 py-16">
                还没有任何帖子，快<a href="/post/new" class="text-emerald-400 underline">发第一个</a>吧！
            </div>
        {% endif %}
    </div>

</div>
</body>
</html>